(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"485e":function(t,e,s){},ab55:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{class:"row justify-around"},[s("div",{class:"custom-dark-bg col-md-8 col-xs-12 container"},[s("p",{staticClass:"title text-h6 q-ml-md q-mt-md"},[t._v("Mis chats")]),t._l(t.channels,(function(e,a){return s("div",{key:a,class:"row custom-dark-div "+(e.active?"bg-pink":""),on:{click:function(e){return t.openModal(a)}}},[s("p",{staticClass:"pl-title"},[t._v(t._s(e.user.user_name))])])}))],2)]),s("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down",maximized:!0},model:{value:t.modalChat,callback:function(e){t.modalChat=e},expression:"modalChat"}},[s("q-card",{staticClass:"pl-card-body"},[s("q-bar",[s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{staticClass:"bg-white text-primary"},[t._v("Close")])],1)],1),s("div",{staticClass:"content"},[-1!==t.channelSelected?s("ChatBox",{attrs:{userTo:t.channels[t.channelSelected].user,messagesProp:t.chats}}):t._e()],1)],1)],1)],1)},n=[],i=s("9f21"),c=s("e26a"),o={name:"Chat",mixins:[i["a"]],components:{ChatBox:c["a"]},data(){return{channels:[],modalChat:!1,channelSelected:-1,user:JSON.parse(localStorage.getItem("user"))}},computed:{chats:{get(){return this.$store.state.chat.chats}},notifications:{get(){return this.$store.state.chat.notifications}}},watch:{chats(){this.getChannels()},notifications(){this.getChannels()}},mounted(){this.getChannels()},methods:{isInChannels(t){let e=!1;for(let s=0;s<this.channels.length;s++)this.channels[s].user.user_name===t.user_name&&(e=!0);return e},getChannels(){for(let t=0;t<this.chats.length;t++)if(this.isInChannels(this.chats[t].chat.user)||this.chats[t].chat.user.user_id===this.user.user_id)this.channels=this.channels.map((t=>(t.active=-1!==this.notifications.indexOf(t.user.user_id),t)));else{const e=this.chats[t].chat;e.active=!0,this.channels.push(e)}},openModal(t){this.$store.dispatch("chat/removeNotification",this.channels[t].userTo.user_id),this.getChannels(),this.channelSelected=t,this.modalChat=!0}}},l=o,h=(s("ac93"),s("2877")),r=s("9989"),u=s("24e8"),d=s("f09f"),p=s("d847"),m=s("2c91"),f=s("9c40"),C=s("05c0"),g=s("7f67"),v=s("eebe"),_=s.n(v),w=Object(h["a"])(l,a,n,!1,null,null,null);e["default"]=w.exports;_()(w,"components",{QPage:r["a"],QDialog:u["a"],QCard:d["a"],QBar:p["a"],QSpace:m["a"],QBtn:f["a"],QTooltip:C["a"]}),_()(w,"directives",{ClosePopup:g["a"]})},ac93:function(t,e,s){"use strict";s("485e")}}]);