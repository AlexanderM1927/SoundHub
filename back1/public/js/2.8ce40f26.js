(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"39c3":function(t,e,s){"use strict";s("afa3")},5108:function(t,e,s){"use strict";s("e11b")},5638:function(t,e,s){},6131:function(t,e,s){"use strict";s("5638")},"713b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{staticClass:"ov-h",attrs:{view:"hHh Lpr lFf"}},[s("Navbar"),s("q-page-container",[s("router-view")],1),s("Player")],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-header",{staticClass:"bg-grey",attrs:{elevated:""}},[s("q-toolbar",{staticClass:"row nav-height col-12 justify-between"},[s("div",{staticClass:"row",on:{click:function(e){return t.goTo("/")}}},[s("img",{staticClass:"nav-icon",attrs:{src:"/favicon.png"}}),s("q-toolbar-title",{staticClass:"nav-title vertical-middle"},[t._v("\n          SoundHub\n        ")])],1),s("q-btn",{staticClass:"nav-burger",attrs:{flat:"",round:"",dense:"",icon:"fas fa-bars"},on:{click:function(e){t.side_options=!t.side_options}}})],1)],1),s("q-drawer",{attrs:{"show-if-above":"",width:300,breakpoint:2e3,bordered:"","content-class":"bg-grey"},model:{value:t.side_options,callback:function(e){t.side_options=e},expression:"side_options"}},[s("q-scroll-area",{staticClass:"fit"},[s("q-list",[s("q-item",[s("q-input",{staticClass:"nav-input full-width q-pa-xs q-pl-sm",attrs:{dark:"",dense:"",borderless:"",placeholder:"Buscar..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[""===t.search_content?s("q-icon",{attrs:{name:"fas fa-search"}}):s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"fas fa-times"},on:{click:function(e){t.search_content=""}}})]},proxy:!0}]),model:{value:t.search_content,callback:function(e){t.search_content=e},expression:"search_content"}})],1),t._l(t.menuList,(function(e,a){return[s("NavLink",{key:a,attrs:{menuItem:e,token:t.token}})]}))],2)],1)],1)],1)},o=[],r=(s("5319"),s("9f21")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return void 0===t.menuItem.requireSession||t.menuItem.requireSession&&t.token||!t.menuItem.requireSession&&!t.token?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:"NI-container "+(t.menuItem.active?"bg-pink":""),attrs:{clickable:"",active:"Outbox"===t.menuItem.label},on:{click:function(e){return t.goTo(t.menuItem.to)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:t.menuItem.icon}})],1),s("q-item-section",[t._v("\n    "+t._s(t.menuItem.title)+"\n  ")])],1):t._e()},l=[],u={mixins:[r["a"]],data(){return{}},name:"NavLink",props:["menuItem","token"],mounted(){}},d=u,m=(s("5108"),s("2877")),h=s("66e5"),p=s("4074"),f=s("0016"),g=s("714f"),v=s("eebe"),y=s.n(v),b=Object(m["a"])(d,c,l,!1,null,null,null),_=b.exports;y()(b,"components",{QItem:h["a"],QItemSection:p["a"],QIcon:f["a"]}),y()(b,"directives",{Ripple:g["a"]});var w=s("8e27");const k=[{title:"Mi perfil",icon:"far fa-user-circle",to:"/profile",separator:!0,requireSession:!0},{title:"Mis listas",icon:"fas fa-play",to:"/playlist",separator:!1,requireSession:!0},{title:"Mis canciones",icon:"fas fa-music",to:"/sound",separator:!1},{title:"Login",icon:"far fa-sign-in",to:"/login",separator:!0,requireSession:!1}];var C={name:"Navbar",components:{NavLink:_},mixins:[r["a"]],data(){return{search_content:"",side_options:!1,menuList:k,token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user"))}},computed:{searchText:{get(){return this.$store.state.sounds.searchText}},notifications:{get(){return this.$store.state.chat.notifications}}},watch:{searchText(){this.search_content=this.searchText},notifications(){this.menuList=this.menuList.map((t=>("/chat"===t.to&&(t.active=this.notifications.length>0),t)))}},mounted(){this.getChats(),this.menuList.push({title:"Chats",icon:"fas fa-bells",to:"/chat",separator:!1,requireSession:!0,active:this.notifications.length>0}),this.menuList.push({title:"Salir",icon:"fas fa-sign-out-alt",to:"/logout",separator:!1,requireSession:!0})},methods:{delete_search(){this.search_content=""},search(){this.side_options=!1,this.$store.dispatch("sounds/getItemsByName",{name:this.search_content}),this.goTo("/search/"+this.search_content)},getChats(){const t="https://soundhubback.soft-corp.online/v1/".replace("/v1/","");this.socket=Object(w["io"])(t),this.socket.on("message",(t=>{t.userTo.user_id===this.user.user_id&&(this.$store.dispatch("chat/addChats",{chat:t}),-1===this.notifications.indexOf(t.user.user_id)&&this.$store.dispatch("chat/addNotification",t.user.user_id),this.alert("primary",`${t.user.user_name} te ha enviado un mensaje`))}))}}},q=C,x=(s("982f4"),s("e359")),I=s("65c6"),S=s("6ac5"),L=s("9c40"),Q=s("9404"),P=s("4983"),N=s("1c1c"),$=s("27f9"),O=Object(m["a"])(q,n,o,!1,null,"4f4bb373",null),T=O.exports;y()(O,"components",{QHeader:x["a"],QToolbar:I["a"],QToolbarTitle:S["a"],QBtn:L["a"],QDrawer:Q["a"],QScrollArea:P["a"],QList:N["a"],QItem:h["a"],QInput:$["a"],QIcon:f["a"]});var j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"inactive",attrs:{id:"player"}},[s("div",{staticClass:"row justify-center vertical-middle"},[s("div",{staticClass:"col-md-1 col-xs-2"},[s("center",{staticClass:"row q-mt-xs"},[t.isLoading?s("q-circular-progress",{attrs:{size:"72px",indeterminate:"",color:"pink"}}):t._e(),t.isPlaying?s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-pause"},on:{click:function(e){return t.wavesurfer.playPause()}}}):t._e(),t.isPlaying||t.isLoading?t._e():s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-play"},on:{click:function(e){return t.wavesurfer.playPause()}}})],1)],1),t.playlist.length>0?s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn",attrs:{name:"fas fa-step-backward",color:"pink"},on:{click:function(e){return t.setNewSong("prev")}}})],1):t._e(),s("div",{class:t.playlist.length>0?"col-md-2 col-xs-4":"col-md-10 col-xs-7"},[s("div",{staticStyle:{width:"100%"},attrs:{id:"waveform"}})]),t.playlist.length>0?s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn",attrs:{name:"fas fa-step-forward",color:"pink"},on:{click:function(e){return t.setNewSong("next")}}})],1):t._e(),!t.song||"sound"!==t.song.payload.type&&"video"!==t.song.payload.type?t._e():s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-info",size:"xs"},on:{click:t.openDialogInfo}})],1)]),s("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down",maximized:!0},model:{value:t.dialogInfo,callback:function(e){t.dialogInfo=e},expression:"dialogInfo"}},[s("q-card",{staticClass:"pl-card-body"},[s("q-bar",[s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{staticClass:"bg-white text-primary"},[t._v("Close")])],1)],1),s("div",{staticClass:"content"},[s("div",{staticClass:"text-h5",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.soundInfo.title))]),"sound"===t.soundInfo.type?s("span",[t._v("\n          Publicada por:\n          "),s("a",{staticStyle:{"text-decoration":"none",color:"#DEA559","font-weight":"bold",cursor:"pointer"},on:{click:function(e){return t.goTo("/profile/"+t.soundInfo.user_id)}}},[t._v("\n            "+t._s(t.soundInfo.user)+"\n          ")])]):t._e(),"sound"===t.soundInfo.type&&t.token?s("div",[s("br"),s("q-separator"),s("div",{staticClass:"text-h6"},[t._v("Comentarios:")]),s("div",{staticClass:"box__comments"},t._l(t.comments,(function(t,e){return s("comment",{key:e,attrs:{info:t}})})),1),s("q-editor",{staticClass:"full-width",attrs:{"content-class":"bg-comment","toolbar-toggle-color":"yellow-8","toolbar-bg":"pink","min-height":"5rem"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("br"),s("q-btn",{staticClass:"full-width",attrs:{label:"Comentar",color:"pink"},on:{click:t.makeComment}})],1):t._e()])],1)],1)],1)},E=[],F=(s("e6cf"),s("ddb0"),s("8896")),B=s.n(F),D=s("7405"),M=s("758b"),z={store(t,e){return Object(M["a"])().post("comments",t,{headers:{Authorization:e}})},getCommentsBySound(t,e){return Object(M["a"])().get("comments/"+t.id,{headers:{Authorization:e}})}},A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row pl-container"},[s("div",{staticClass:"col-12"},[s("q-chat-message",{attrs:{name:t.info.user.user_name,text:[t.info.comment_msg],"text-html":!0}})],1)])},J=[],H={name:"Comment",mixins:[r["a"]],props:["info"],data(){return{}}},W=H,R=s("8169"),G=Object(m["a"])(W,A,J,!1,null,null,null),K=G.exports;y()(G,"components",{QChatMessage:R["a"]});var U={name:"Player",mixins:[r["a"]],components:{Comment:K},data(){return{wavesurfer:null,isLoading:!1,dialogInfo:!1,soundInfo:{},comment:"",token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user")),comments:[],isPlaying:!0}},computed:{song:{get(){return this.$store.state.sounds.song}},playlist:{get(){return this.$store.state.sounds.playlist}},position:{get(){return this.$store.state.sounds.position}}},watch:{song(){this.song&&this.loadFile(this.song.url)}},methods:{async makeComment(){if(this.comment.length>0){const t=await z.store({comment:this.comment,user_id:this.user.user_id,sound_id:this.soundInfo.id},this.token);this.comments.unshift({user:{user_name:this.user.user_name},comment_msg:t.data.data.comment_msg}),this.comment="",200===t.status&&this.alert("positive","Comentario enviado")}else this.alert("warning","Please, introduce some text")},async openDialogInfo(){this.dialogInfo?this.dialogInfo=!1:(this.dialogInfo=!0,this.activateLoading(),await this.getInformationSound(),"sound"===this.soundInfo.type&&await this.getComments(),this.disableLoading())},async getComments(){try{const t=await z.getCommentsBySound({id:this.soundInfo.id}),e=t.data.data;this.comments=[...e]}catch(t){console.error(t)}},async getInformationSound(){let t=this.song.payload;if(this.playlist.length>0&&(t=this.playlist[this.position].payload),"device"===t.type)console.log("sound device"),console.log(t);else try{const e=await D["a"].getSoundById(t),s=e.data.data;"sound"===t.type?this.soundInfo={title:s.sound_name,id:s.sound_id,user_id:s.user_id,user:s.user.user_name}:this.soundInfo={title:s.title,id:s.id},this.soundInfo.type=t.type}catch(e){console.error(e)}},createWaveSurfer(){this.wavesurfer=B.a.create({container:"#waveform",hideScrollbar:!0,waveColor:"#F5F5F5",progressColor:"#CF2741",cursorColor:"#fff",barWidth:3,backend:"MediaElement"}),this.wavesurfer.on("error",(t=>{console.error(t)})),this.wavesurfer.on("loading",(t=>{this.isLoading=!0,100===t&&(this.isLoading=!1)})),this.wavesurfer.on("ready",(()=>{this.isLoading=!1,this.disableLoading(),this.wavesurfer.playPause()})),this.wavesurfer.on("play",(()=>{this.isLoading=!1,this.isPlaying=!0})),this.wavesurfer.on("pause",(()=>{this.isLoading=!1,this.isPlaying=!1})),this.wavesurfer.on("finish",(()=>{this.setNewSong("next")}))},async loadFile(t){this.wavesurfer||this.createWaveSurfer(),this.wavesurfer.load(t),this.activateLoading()},setNewSong(t){this.playlist.length>0&&("next"===t&&this.playlist.length>this.position?(this.loadFile(this.playlist[this.position+1].url),this.$store.dispatch("sounds/setPosition",this.position+1)):this.position>0&&(this.loadFile(this.playlist[this.position-1].url),this.$store.dispatch("sounds/setPosition",this.position-1)))}}},V=U,X=(s("6131"),s("58ea")),Y=s("24e8"),Z=s("f09f"),tt=s("d847"),et=s("2c91"),st=s("05c0"),at=s("eb85"),it=s("d66b"),nt=s("7f67"),ot=Object(m["a"])(V,j,E,!1,null,null,null),rt=ot.exports;y()(ot,"components",{QCircularProgress:X["a"],QIcon:f["a"],QDialog:Y["a"],QCard:Z["a"],QBar:tt["a"],QSpace:et["a"],QBtn:L["a"],QTooltip:st["a"],QSeparator:at["a"],QEditor:it["a"]}),y()(ot,"directives",{ClosePopup:nt["a"]});var ct={name:"MainLayout",components:{Navbar:T,Player:rt},mixins:[r["a"]],data(){return{leftDrawerOpen:!1,wavesurfer:null,isLoading:!1}},methods:{}},lt=ct,ut=(s("39c3"),s("4d5a")),dt=s("09e3"),mt=Object(m["a"])(lt,a,i,!1,null,"6f6a6a55",null);e["default"]=mt.exports;y()(mt,"components",{QLayout:ut["a"],QPageContainer:dt["a"]})},"982f4":function(t,e,s){"use strict";s("9b7f")},"9b7f":function(t,e,s){},afa3:function(t,e,s){},e11b:function(t,e,s){}}]);