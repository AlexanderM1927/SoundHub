(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"39c3":function(t,e,s){"use strict";s("afa3")},5108:function(t,e,s){"use strict";s("e11b")},"64fd":function(t,e,s){"use strict";s("72d9")},"713b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{staticClass:"ov-h",attrs:{view:"hHh Lpr lFf"}},[s("Navbar"),s("q-page-container",[s("router-view")],1),s("Player")],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-header",{staticClass:"bg-grey",attrs:{elevated:""}},[s("q-toolbar",{staticClass:"row nav-height col-12 justify-between"},[s("div",{staticClass:"row",on:{click:function(e){return t.goTo("/")}}},[s("img",{staticClass:"nav-icon",attrs:{src:"/favicon.png"}}),s("q-toolbar-title",{staticClass:"nav-title vertical-middle"},[t._v("\n          SoundHub\n        ")])],1),s("q-btn",{staticClass:"nav-burger",attrs:{flat:"",round:"",dense:"",icon:"fas fa-bars"},on:{click:function(e){t.side_options=!t.side_options}}})],1)],1),s("q-drawer",{attrs:{"show-if-above":"",width:300,breakpoint:2e3,bordered:"","content-class":"bg-grey"},model:{value:t.side_options,callback:function(e){t.side_options=e},expression:"side_options"}},[s("q-scroll-area",{staticClass:"fit"},[s("q-list",[s("q-item",[s("q-input",{staticClass:"nav-input full-width q-pa-xs q-pl-sm",attrs:{dark:"",dense:"",borderless:"",placeholder:"Buscar..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[""===t.search_content?s("q-icon",{attrs:{name:"fas fa-search"}}):s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"fas fa-times"},on:{click:function(e){t.search_content=""}}})]},proxy:!0}]),model:{value:t.search_content,callback:function(e){t.search_content=e},expression:"search_content"}})],1),t._l(t.menuList,(function(e,a){return[s("NavLink",{key:a,attrs:{menuItem:e,token:t.token}})]}))],2)],1)],1)],1)},o=[],r=(s("5319"),s("9f21")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return void 0===t.menuItem.requireSession||t.menuItem.requireSession&&t.token||!t.menuItem.requireSession&&!t.token?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:"NI-container "+(t.menuItem.active?"bg-pink":""),attrs:{clickable:"",active:"Outbox"===t.menuItem.label},on:{click:function(e){return t.goTo(t.menuItem.to)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:t.menuItem.icon}})],1),s("q-item-section",[t._v("\n    "+t._s(t.menuItem.title)+"\n  ")])],1):t._e()},l=[],u={mixins:[r["a"]],data(){return{}},name:"NavLink",props:["menuItem","token"],mounted(){}},d=u,m=(s("5108"),s("2877")),p=s("66e5"),h=s("4074"),f=s("0016"),g=s("714f"),y=s("eebe"),v=s.n(y),b=Object(m["a"])(d,c,l,!1,null,null,null),_=b.exports;v()(b,"components",{QItem:p["a"],QItemSection:h["a"],QIcon:f["a"]}),v()(b,"directives",{Ripple:g["a"]});var k=s("8e27");const C=[{title:"Mi perfil",icon:"far fa-user-circle",to:"/profile",separator:!0,requireSession:!0},{title:"Mis listas",icon:"fas fa-play",to:"/playlist",separator:!1,requireSession:!0},{title:"Mis canciones",icon:"fas fa-music",to:"/sound",separator:!1},{title:"Login",icon:"far fa-sign-in",to:"/login",separator:!0,requireSession:!1}];var q={name:"Navbar",components:{NavLink:_},mixins:[r["a"]],data(){return{search_content:"",side_options:!1,menuList:C,token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user"))}},computed:{searchText:{get(){return this.$store.state.sounds.searchText}},notifications:{get(){return this.$store.state.chat.notifications}}},watch:{searchText(){this.search_content=this.searchText},notifications(){this.menuList=this.menuList.map((t=>("/chat"===t.to&&(t.active=this.notifications.length>0),t)))}},mounted(){this.getChats(),this.menuList.push({title:"Chats",icon:"fas fa-bells",to:"/chat",separator:!1,requireSession:!0,active:this.notifications.length>0}),this.menuList.push({title:"Salir",icon:"fas fa-sign-out-alt",to:"/logout",separator:!1,requireSession:!0})},methods:{delete_search(){this.search_content=""},search(){this.side_options=!1,this.$store.dispatch("sounds/getItemsByName",{name:this.search_content}),this.goTo("/search/"+this.search_content)},getChats(){const t="https://soundhubback.soft-corp.online/v1/".replace("/v1/","");this.socket=Object(k["io"])(t),this.socket.on("message",(t=>{t.userTo.user_id===this.user.user_id&&(this.$store.dispatch("chat/addChats",{chat:t}),-1===this.notifications.indexOf(t.user.user_id)&&this.$store.dispatch("chat/addNotification",t.user.user_id),this.alert("primary",`${t.user.user_name} te ha enviado un mensaje`))}))}}},I=q,w=(s("982f4"),s("e359")),x=s("65c6"),S=s("6ac5"),Q=s("9c40"),L=s("9404"),P=s("4983"),$=s("1c1c"),N=s("27f9"),O=Object(m["a"])(I,n,o,!1,null,"4f4bb373",null),T=O.exports;v()(O,"components",{QHeader:w["a"],QToolbar:x["a"],QToolbarTitle:S["a"],QBtn:Q["a"],QDrawer:L["a"],QScrollArea:P["a"],QList:$["a"],QItem:p["a"],QInput:N["a"],QIcon:f["a"]});var j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"inactive",attrs:{id:"player"}},[s("div",{staticClass:"row justify-center vertical-middle"},[s("div",{staticClass:"col-md-1 col-xs-2"},[s("center",{staticClass:"row q-mt-xs"},[t.isLoading?s("q-circular-progress",{attrs:{size:"72px",indeterminate:"",color:"pink"}}):t._e(),t.isPlaying?s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-pause"},on:{click:function(e){return t.playPause()}}}):t._e(),t.isPlaying||t.isLoading?t._e():s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-play"},on:{click:function(e){return t.playPause()}}})],1)],1),t.playlist.length>0?s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn",attrs:{name:"fas fa-step-backward",color:"pink"},on:{click:function(e){return t.setNewSong("prev")}}})],1):t._e(),s("div",{class:t.playlist.length>0?"col-md-2 col-xs-4":"col-md-10 col-xs-7"},[s("audio",{ref:"audio"},[s("source",{attrs:{src:t.song.url,type:"audio/ogg"}}),s("source",{attrs:{src:t.song.url,type:"audio/mp4"}})]),t._m(0)]),t.playlist.length>0?s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn",attrs:{name:"fas fa-step-forward",color:"pink"},on:{click:function(e){return t.setNewSong("next")}}})],1):t._e(),!t.song||"sound"!==t.song.payload.type&&"video"!==t.song.payload.type?t._e():s("div",{staticClass:"col-md-1 col-xs-2 q-mt-xs"},[s("q-icon",{staticClass:"plyr-btn plyr-pink",attrs:{name:"fas fa-info",size:"xs"},on:{click:t.openDialogInfo}})],1)]),s("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down",maximized:!0},model:{value:t.dialogInfo,callback:function(e){t.dialogInfo=e},expression:"dialogInfo"}},[s("q-card",{staticClass:"pl-card-body"},[s("q-bar",[s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{staticClass:"bg-white text-primary"},[t._v("Close")])],1)],1),s("div",{staticClass:"content"},[s("div",{staticClass:"text-h5",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.soundInfo.title))]),"sound"===t.soundInfo.type?s("span",[t._v("\n          Publicada por:\n          "),s("a",{staticStyle:{"text-decoration":"none",color:"#DEA559","font-weight":"bold",cursor:"pointer"},on:{click:function(e){return t.goTo("/profile/"+t.soundInfo.user_id)}}},[t._v("\n            "+t._s(t.soundInfo.user)+"\n          ")])]):t._e(),"sound"===t.soundInfo.type&&t.token?s("div",[s("br"),s("q-separator"),s("div",{staticClass:"text-h6"},[t._v("Comentarios:")]),s("div",{staticClass:"box__comments"},t._l(t.comments,(function(t,e){return s("comment",{key:e,attrs:{info:t}})})),1),s("q-editor",{staticClass:"full-width",attrs:{"content-class":"bg-comment","toolbar-toggle-color":"yellow-8","toolbar-bg":"pink","min-height":"5rem"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("br"),s("q-btn",{staticClass:"full-width",attrs:{label:"Comentar",color:"pink"},on:{click:t.makeComment}})],1):t._e()])],1)],1)],1)},E=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"seek"}},[s("div",{staticClass:"player-timeline"},[s("div",{staticClass:"player-progress"}),s("div",{staticClass:"player-seeker",attrs:{title:"Seek"}})])])}],B=(s("e6cf"),s("ddb0"),s("7405")),D=s("758b"),z={store(t,e){return Object(D["a"])().post("comments",t,{headers:{Authorization:e}})},getCommentsBySound(t,e){return Object(D["a"])().get("comments/"+t.id,{headers:{Authorization:e}})}},F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row pl-container"},[s("div",{staticClass:"col-12"},[s("q-chat-message",{attrs:{name:t.info.user.user_name,text:[t.info.comment_msg],"text-html":!0}})],1)])},M=[],A={name:"Comment",mixins:[r["a"]],props:["info"],data(){return{}}},J=A,H=s("8169"),R=Object(m["a"])(J,F,M,!1,null,null,null),G=R.exports;v()(R,"components",{QChatMessage:H["a"]});var K={name:"Player",mixins:[r["a"]],components:{Comment:G},data(){return{wavesurfer:null,isLoading:!1,dialogInfo:!1,soundInfo:{},comment:"",token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user")),comments:[],isPlaying:!0}},watch:{song(){this.song&&this.loadFile(this.song.url)}},computed:{song:{get(){return this.$store.state.sounds.song}},playlist:{get(){return this.$store.state.sounds.playlist}},position:{get(){return this.$store.state.sounds.position}}},methods:{playPause(){this.isPlaying=!this.isPlaying,this.isPlaying?this.$refs.audio.play():this.$refs.audio.pause()},async loadFile(t){this.activateLoading(),this.isLoading=!0,await this.$refs.audio.play(),this.isPlaying=!0,this.isLoading=!1,this.disableLoading()},async makeComment(){if(this.comment.length>0){const t=await z.store({comment:this.comment,user_id:this.user.user_id,sound_id:this.soundInfo.id},this.token);this.comments.unshift({user:{user_name:this.user.user_name},comment_msg:t.data.data.comment_msg}),this.comment="",200===t.status&&this.alert("positive","Comentario enviado")}else this.alert("warning","Please, introduce some text")},async openDialogInfo(){this.dialogInfo?this.dialogInfo=!1:(this.dialogInfo=!0,this.activateLoading(),await this.getInformationSound(),"sound"===this.soundInfo.type&&await this.getComments(),this.disableLoading())},async getComments(){try{const t=await z.getCommentsBySound({id:this.soundInfo.id}),e=t.data.data;this.comments=[...e]}catch(t){console.error(t)}},async getInformationSound(){let t=this.song.payload;if(this.playlist.length>0&&(t=this.playlist[this.position].payload),"device"===t.type)console.log("sound device"),console.log(t);else try{const e=await B["a"].getSoundById(t),s=e.data.data;"sound"===t.type?this.soundInfo={title:s.sound_name,id:s.sound_id,user_id:s.user_id,user:s.user.user_name}:this.soundInfo={title:s.title,id:s.id},this.soundInfo.type=t.type}catch(e){console.error(e)}},setNewSong(t){this.playlist.length>0&&("next"===t&&this.playlist.length>this.position?(this.loadFile(this.playlist[this.position+1].url),this.$store.dispatch("sounds/setPosition",this.position+1)):this.position>0&&(this.loadFile(this.playlist[this.position-1].url),this.$store.dispatch("sounds/setPosition",this.position-1)))}}},U=K,V=(s("64fd"),s("58ea")),W=s("24e8"),X=s("f09f"),Y=s("d847"),Z=s("2c91"),tt=s("05c0"),et=s("eb85"),st=s("d66b"),at=s("7f67"),it=Object(m["a"])(U,j,E,!1,null,"926b02ca",null),nt=it.exports;v()(it,"components",{QCircularProgress:V["a"],QIcon:f["a"],QDialog:W["a"],QCard:X["a"],QBar:Y["a"],QSpace:Z["a"],QBtn:Q["a"],QTooltip:tt["a"],QSeparator:et["a"],QEditor:st["a"]}),v()(it,"directives",{ClosePopup:at["a"]});var ot={name:"MainLayout",components:{Navbar:T,Player:nt},mixins:[r["a"]],data(){return{leftDrawerOpen:!1,wavesurfer:null,isLoading:!1}},methods:{}},rt=ot,ct=(s("39c3"),s("4d5a")),lt=s("09e3"),ut=Object(m["a"])(rt,a,i,!1,null,"6f6a6a55",null);e["default"]=ut.exports;v()(ut,"components",{QLayout:ct["a"],QPageContainer:lt["a"]})},"72d9":function(t,e,s){},"982f4":function(t,e,s){"use strict";s("9b7f")},"9b7f":function(t,e,s){},afa3:function(t,e,s){},e11b:function(t,e,s){}}]);